---
title: "CLI"
description: "Manage PowerSync Cloud and self-hosted instances from the command line with config-as-code."
---

The PowerSync CLI lets you manage PowerSync Service instances, deploy sync config (your Sync Streams or Sync Rules), generate client schemas, and run diagnostics. It is distributed as the [powersync](https://www.npmjs.com/package/powersync) npm package.

**Cloud:** Full support for PowerSync Cloud. Log in with a personal access token, then define your instance config in a `powersync/` directory (`service.yaml`, `sync-config.yaml`) and deploy with `powersync deploy`.

**Self-hosted:** You can link to an existing PowerSync Service instance and run a subset of commands (e.g. `powersync fetch status`, `powersync generate schema`, `powersync validate`). Docker is supported for local development.

<Tip>
  For a full step-by-step flow using the CLI, use the [Setup Guide](/intro/setup-guide): choose the **CLI (Cloud)** or **CLI (Self-Hosted)** tab in steps 2–5 to configure your instance, connect the source database, deploy sync config, and generate development tokens.
</Tip>

<Note>
  The PowerSync CLI was overhauled in version TODO. The redesign is based on this [design proposal](https://docs.google.com/document/d/1iqpJF2gog2jB-ZWeN8TBEjcad8aBKNKbue2yJ21q_-s/edit). 
  
  Main improvements: **self-hosted support** (link to your own PowerSync Service and run commands such as fetch status, generate schema, validate); **open source**; and **improved DX**, including validated config files (`service.yaml`, `sync-config.yaml`) used for creating and deploying changes to PowerSync instances instead of long command-line flags. 
  
  See [Migrating from the previous CLI](#migrating-from-the-previous-cli) if you used the older flow.
</Note>

## Installation

Install globally or run via `npx`:

```bash
npm install -g powersync
```

```bash
npx powersync --version
```

## Authentication (Cloud)

Cloud commands require a PowerSync **personal access token (PAT)**.

**Interactive login (recommended for local use):**

```bash
powersync login
```

You can open a browser to [create a token in the PowerSync Dashboard](https://dashboard.powersync.com/account/access-tokens) or paste an existing token. The CLI stores the token in secure storage when available (e.g. macOS Keychain), or in a config file after confirmation.

**CI and scripts:** Set the `TOKEN` environment variable. The CLI uses `TOKEN` when set; otherwise it uses the token from `powersync login`.

```bash
export TOKEN=your-personal-access-token
powersync fetch instances --project-id=<project-id>
```

To clear stored credentials: `powersync logout`.

## Config-as-code

The CLI uses a **config directory** (default `powersync/`) that holds:

| File | Purpose |
|------|---------|
| `service.yaml` | Instance configuration: name, region, replication DB connection, client auth |
| `sync-config.yaml` | Sync Streams (or Sync Rules) configuration |
| `cli.yaml` | Link file (written by `powersync link`); ties this directory to an instance |

All YAML files support the **`!env`** custom tag for secrets and environment-specific values, e.g. `uri: !env PS_DATABASE_URI`. Use `!env VAR::number` or `!env VAR::boolean` for typed substitution. For using one config directory across multiple instances (e.g. dev/staging/prod) via `!env` in `cli.yaml`, see the [CLI usage docs](https://github.com/powersync-ja/powersync-cli/blob/main/docs/usage.md#configuring-multiple-instances-eg-dev-staging-production).

Edit these files in your IDE, then run `powersync validate` and `powersync deploy`.

## Cloud workflows

### Create a new instance

```bash
# Step 1: Log in and scaffold the config directory
powersync login
powersync init cloud

# Step 2: Edit powersync/service.yaml (name, region, replication, auth) and sync config in sync-config.yaml; use !env for secrets

# Step 3: Create a new Cloud instance from your config and save its ID to cli.yaml
powersync link cloud --create --project-id=<project-id>
# If your token has multiple orgs: add --org-id=<org-id>

# Step 4: Validate your config and deploy it to the new Cloud instance
powersync validate
powersync deploy
```

Use `--directory=<path>` for a different config folder (e.g. `--directory=powersync-prod`).

### Use an existing instance (pull config)

For an instance that already exists (e.g. created in the Dashboard), pull its config into a local directory:

```bash
powersync login
powersync pull instance --project-id=<project-id> --instance-id=<instance-id>
# Edit powersync/service.yaml and powersync/sync-config.yaml as needed
powersync validate
powersync deploy
```

This creates the config directory, writes `cli.yaml`, and downloads `service.yaml` and `sync-config.yaml`. Run `powersync pull instance` again (without IDs if already linked) to refresh local config from the cloud.

### Run commands without local config

You can run commands (e.g. `powersync generate schema`, `powersync generate token`, `powersync fetch status`) against an instance whose config is managed elsewhere (e.g. the Dashboard). Either link once with `powersync link cloud --instance-id=<id> --project-id=<id>`, or pass `--instance-id` and `--project-id` (and `--org-id` when your token has multiple orgs) on each command. You can also set `INSTANCE_ID`, `PROJECT_ID`, and optionally `ORG_ID` in the environment. For how the CLI resolves context (flags vs environment variables vs `cli.yaml`), and for multiple instances (e.g. dev/staging/prod with separate directories or `!env`), see the [CLI usage docs](https://github.com/powersync-ja/powersync-cli/blob/main/docs/usage.md#supplying-linking-information-for-cloud-and-self-hosted-commands) in the PowerSync CLI repository.

## Self-hosted workflows

Run **`powersync init self-hosted`** to scaffold a config directory. Edit `service.yaml` with your instance details and use **`powersync link self-hosted --api-url <url>`** to link to an existing running PowerSync Service. The CLI does not create or deploy to self-hosted instances; you manage the server and its config yourself.

Supported self-hosted commands include: `powersync fetch status`, `powersync generate schema`, `powersync generate token`, `powersync validate`. Cloud-only commands (`powersync deploy`, `powersync pull instance`, `powersync fetch instances`, etc.) do not apply.

### Docker (local development)

For local self-hosted development, use Docker:

```bash
powersync init self-hosted
powersync docker configure
powersync docker start
```

Use **`powersync docker reset`** when you need a clean state (stop and remove, then start). For the full workflow, flags (`--database`, `--storage`, `--remove`, `--remove-volumes`), and how the Docker setup uses templates and init scripts, see the [Docker usage docs](https://github.com/powersync-ja/powersync-cli/blob/main/docs/usage-docker.md) in the PowerSync CLI repository. You can also run `powersync docker --help` for command options.

## Common commands

| Command | Description |
|---------|-------------|
| `powersync login` | Store PAT for Cloud (interactive or paste token) |
| `powersync logout` | Remove stored token |
| `powersync init cloud` | Scaffold Cloud config directory |
| `powersync init self-hosted` | Scaffold self-hosted config directory |
| `powersync link cloud --project-id=<id>` | Link to an existing Cloud instance |
| `powersync link cloud --create --project-id=<id>` | Create a new Cloud instance and link |
| `powersync pull instance --project-id=<id> --instance-id=<id>` | Download Cloud config into local files |
| `powersync deploy` | Deploy local config to linked Cloud instance |
| `powersync deploy sync-config` | Deploy only sync config |
| `powersync validate` | Validate config and sync rules/streams |
| `powersync fetch instances` | List Cloud instances (optionally by project/org) |
| `powersync fetch config` | Print linked Cloud instance config (YAML/JSON) |
| `powersync fetch status` | Instance diagnostics (connections, replication) |
| `powersync generate schema --output=ts --output-path=schema.ts` | Generate client-side schema |
| `powersync generate token --subject=user-123` | Generate a development JWT |

For full usage and flags, run `powersync --help` or `powersync <command> --help`. A complete [command reference](https://github.com/powersync-ja/powersync-cli/blob/main/cli/README.md#commands) is available in the PowerSync CLI repository; see also the [powersync npm package](https://www.npmjs.com/package/powersync).

## Deploying from CI (e.g. GitHub Actions)

You can automate sync config (and full config) deployments using the CLI in CI. Use the config directory as the source of truth: keep `service.yaml` and `sync-config.yaml` in the repo (with secrets via `!env` and CI secrets), then run `powersync deploy` (or `powersync deploy sync-config`).

**Secrets:** Set `TOKEN` to your PowerSync personal access token. If the workflow does not use a linked directory, also set `INSTANCE_ID` and `PROJECT_ID` (and `ORG_ID` only if your token has multiple organizations).

<Card
  title="GitHub Actions Demo"
  icon="github"
  href="https://github.com/powersync-community/github-actions-demo"
  horizontal
>
  Example: deploy sync config on push to main
</Card>

The demo shows how to configure repository secrets and run the CLI in a workflow. With the new CLI, you typically use a `powersync/` directory in the repo and run `powersync deploy` or `powersync deploy sync-config` with `TOKEN` (and optionally `INSTANCE_ID`, `PROJECT_ID`, `ORG_ID`) set in the environment.

## Migrating from the previous CLI

If you used the older PowerSync CLI (e.g. `npx powersync init` to set token and org/project, then `powersync instance set`, `powersync instance deploy`, etc.), the new CLI uses a different flow. Upgrade to the latest **powersync** npm version and follow the mapping below.

| Previous CLI | New CLI |
|--------------|---------|
| `npx powersync init` (enter token, org, project) | **`powersync login`** (token only). Then **`powersync init cloud`** to scaffold config, or **`powersync pull instance --project-id=... --instance-id=...`** to pull an existing instance. |
| `powersync instance set --instanceId=<id>` | **`powersync link cloud --instance-id=<id> --project-id=<id>`** (writes `cli.yaml` in config directory). Or use `--directory` for a specific folder. |
| `powersync instance deploy` (interactive or long flag list) | Edit **`powersync/service.yaml`** and **`powersync/sync-config.yaml`**, then **`powersync deploy`**. Config is in files, not command args. |
| `powersync instance config` | **`powersync fetch config`** (output as YAML or JSON with `--output`). |
| Deploy only sync rules | **`powersync deploy sync-config`**. |
| `powersync instance schema` | **`powersync generate schema --output=... --output-path=...`** (and/or **`powersync fetch status`** for diagnostics). |
| Org/project stored by init | Pass **`--org-id`** and **`--project-id`** when needed, or use **`powersync link cloud`** so they are stored in **`powersync/cli.yaml`**. For CI, use env vars: **`TOKEN`**, **`INSTANCE_ID`**, **`PROJECT_ID`**, **`ORG_ID`** (optional). |

**Summary:** Authenticate with **`powersync login`** (or `TOKEN` in CI). Use a **config directory** with `service.yaml` and `sync-config.yaml` as the source of truth. **Link** with **`powersync link cloud`** or **`powersync pull instance`**, then run **`powersync deploy`** or **`powersync deploy sync-config`**. No more setting “current instance” separately from config—the directory and `cli.yaml` define the target.

## Additional documentation (CLI Repository)

The following are documented in the [PowerSync CLI repository](https://github.com/powersync-ja/powersync-cli); this page covers the main workflows and commands you need for the [Setup Guide](/intro/setup-guide) and day-to-day use.

| Resource | Description |
|----------|-------------|
| [CLI README](https://github.com/powersync-ja/powersync-cli/blob/main/cli/README.md) | Getting started, Cloud and self-hosted overview, and full **command reference** with all flags. |
| [General usage](https://github.com/powersync-ja/powersync-cli/blob/main/docs/usage.md) | **How the CLI works**: local config vs linking, resolution order (flags → env vars → `cli.yaml`), and **configuring multiple instances** (e.g. dev/staging/prod with separate directories or `!env` in `cli.yaml`). |
| [Docker (local development)](https://github.com/powersync-ja/powersync-cli/blob/main/docs/usage-docker.md) | Self-hosted Docker workflow, configure/start/stop/reset, database and storage modules, and template layout. |
| [Examples](https://github.com/powersync-ja/powersync-cli/blob/main/examples/README.md) | Sample projects initialized with the CLI (e.g. Cloud pull, self-hosted Postgres, self-hosted Supabase). |

## Known limitations

* Certificates cannot be managed from the CLI.
* When secure storage is unavailable, `powersync login` may store the token in a plaintext config file after explicit confirmation; prefer `TOKEN` in CI.
* Self-hosted: the CLI does not create instances or deploy config to your server; it only links to an existing API and runs a subset of commands (fetch status, generate schema/token, validate). Docker supports local development only.

## Reference

<Card
  title="npm: powersync"
  icon="npm"
  href="https://www.npmjs.com/package/powersync"
  horizontal
>
  Package and version history
</Card>

<Card
  title="Manage your access tokens"
  icon="key"
  href="https://dashboard.powersync.com/account/access-tokens"
  horizontal
>
  Create or revoke tokens in the PowerSync Dashboard
</Card>

<Card
  title="PowerSync CLI (source and advanced docs)"
  icon="github"
  href="https://github.com/powersync-ja/powersync-cli"
  horizontal
>
  CLI repository: usage docs, Docker usage, examples
</Card>
