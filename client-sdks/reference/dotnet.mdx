---
title: ".NET SDK (alpha)"
description: "Full SDK guide for using PowerSync in .NET clients."
sidebarTitle: "SDK Reference"
---

import DotNetInstallation from '/snippets/dotnet/installation.mdx';
import DotNetWatch from '/snippets/dotnet/basic-watch-query.mdx';
import GenerateSchemaAutomatically from '/snippets/generate-schema-automatically.mdx';
import LocalOnly from '/snippets/local-only-escape.mdx';

<CardGroup cols={3}>
  <Card title="PowerSync SDK on NuGet" icon="nuget" href="https://www.nuget.org/packages/PowerSync.Common/">
    This SDK is distributed via NuGet
  </Card>

  <Card title="Source Code" icon="github" href="https://github.com/powersync-ja/powersync-dotnet">
    Refer to the `powersync-dotnet` repo on GitHub
  </Card>

  <Card title="API Reference (Coming soon)" icon="book">
    A full API Reference for this SDK is not yet available. This is planned for a future release.
  </Card>

  <Card title="Example Projects" icon="code" href="/intro/examples">
    Gallery of example projects/demo apps built with .NET PowerSync
  </Card>

  <Card title="Changelog" icon="megaphone" href="https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/CHANGELOG.md">
    Changelog for the SDK
  </Card>
</CardGroup>

<Warning>
  This SDK is currently in an [**alpha** release](/resources/feature-status). It is not suitable for production use as breaking changes may still occur.
</Warning>

## Supported Frameworks and Targets

The PowerSync .NET SDK supports:

* **.NET Versions**: 6, 8, and 9
* **.NET Framework**: Version 4.8 (requires additional configuration)
* **MAUI**: Cross-platform support for Android, iOS, and Windows
* **WPF**: Windows desktop applications

**Current Limitations**:
* Blazor (web) platforms are not yet supported.

For more details, please refer to the package [README](https://github.com/powersync-ja/powersync-dotnet/tree/main?tab=readme-ov-file).

## SDK Features

* Provides real-time streaming of database changes.
* Offers direct access to the SQLite database, enabling the use of SQL on both client and server sides.
* Provides watched queries that allow listening for live updates to data.
* Eliminates the need for client-side database migrations as these are managed automatically.

## Quickstart

<DotNetInstallation />

**Prerequisites**: To sync data between your client-side app and your backend source database, you must have completed the necessary setup for PowerSync, which includes connecting your source database to the PowerSync Service and deploying Sync Rules (steps 1-4 in the [Setup Guide](/intro/setup-guide)).

### 1. Define the Client-Side Schema

import SdkClientSideSchema from '/snippets/sdk-client-side-schema.mdx';

<SdkClientSideSchema />

<GenerateSchemaAutomatically />

You can use [this example](https://github.com/powersync-ja/powersync-dotnet/blob/main/demos/CommandLine/AppSchema.cs) as a reference when defining your schema.

The types available are `text`, `integer` and `real`. These should map directly to the values produced by the [Sync Rules](/sync/rules/overview). If a value doesn't match, it is cast automatically. For details on how backend source database types are mapped to the SQLite types, see [Types](/sync/types).

### 2. Instantiate the PowerSync Database

Next, you need to instantiate the PowerSync database. PowerSync streams changes from your backend source database into the client-side SQLite database, based on your [Sync Rules](/sync/rules/overview). In your client-side app, you can read from and write to the local SQLite database, whether the user is online or offline. 

**Example**:

The initialization syntax differs slightly between the Common and MAUI SDKs: 

<Tabs>
    <Tab title="Common">
    ```cs
    using PowerSync.Common.Client;

    class Demo
    {
        static async Task Main()
        {
            var db = new PowerSyncDatabase(new PowerSyncDatabaseOptions
            {
                Database = new SQLOpenOptions { DbFilename = "tododemo.db" },
                Schema = AppSchema.PowerSyncSchema,
            });
            await db.Init();
        }
    }
    ```
    </Tab>
    <Tab title="MAUI">
    ```cs
    using PowerSync.Common.Client;
    using PowerSync.Common.MDSQLite;
    using PowerSync.Maui.SQLite;
    
    class Demo
    {
        static async Task Main() 
        {
            // Ensures the DB file is stored in a platform appropriate location
            var dbPath = Path.Combine(FileSystem.AppDataDirectory, "maui-example.db");
            var factory = new MAUISQLiteDBOpenFactory(new MDSQLiteOpenFactoryOptions()
            {
                DbFilename = dbPath
            });

            var Db = new PowerSyncDatabase(new PowerSyncDatabaseOptions()
            {
                Database = factory, // Supply a factory
                Schema = AppSchema.PowerSyncSchema,
            });

            await db.Init();
        }
    }
    ```
    </Tab>
</Tabs>

### 3. Integrate with your Backend

The PowerSync backend connector provides the connection between your application backend and the PowerSync client-side managed SQLite database. It is used to:

1. Retrieve an auth token to connect to the PowerSync instance.
2. Upload client-side writes to your backend API. Any writes that are made to the SQLite database are placed into an upload queue by the PowerSync Client SDK and automatically uploaded to your app backend (where you apply those changes to the backend source database) when the user is connected.

Accordingly, the connector must implement two methods:

1. [PowerSyncBackendConnector.FetchCredentials](https://github.com/powersync-ja/powersync-dotnet/blob/main/demos/CommandLine/NodeConnector.cs#L50) - This method will be automatically invoked by the PowerSync Client SDK every couple of minutes to obtain authentication credentials. See [Authentication Setup](/configuration/auth/overview) for instructions on how the credentials should be generated.
2. [PowerSyncBackendConnector.UploadData](https://github.com/powersync-ja/powersync-dotnet/blob/main/demos/CommandLine/NodeConnector.cs#L72) - This method will be automatically invoked by the PowerSync Client SDK whenever it needs to upload client-side writes to your app backend via your backend API. Therefore, in your implementation, you need to define how your backend API is called. See [Writing Client Changes](/handling-writes/writing-client-changes) for considerations on the app backend implementation.

**Example**:

```cs
using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Text;
using System.Text.Json;
using System.Threading.Tasks;
using PowerSync.Common.Client;
using PowerSync.Common.Client.Connection;
using PowerSync.Common.DB.Crud;

public class MyConnector : IPowerSyncBackendConnector
{
    private readonly HttpClient _httpClient;
    
    // User credentials for the current session
    public string UserId { get; private set; }
    
    // Service endpoints
    private readonly string _backendUrl;
    private readonly string _powerSyncUrl;
    private string? _clientId;

    public MyConnector()
    {
        _httpClient = new HttpClient();
        
        // In a real app, this would come from your authentication system
        UserId = "user-123"; 
        
        // Configure your service endpoints
        _backendUrl = "https://your-backend-api.example.com";
        _powerSyncUrl = "https://your-powersync-instance.powersync.journeyapps.com";
    }

    public async Task<PowerSyncCredentials?> FetchCredentials()
    {
        try {
            // Implement fetchCredentials to obtain a JWT from your authentication service. 
            // See https://docs.powersync.com/configuration/auth/overview

            var authToken = "your-auth-token"; // Use a development token (see Authentication Setup https://docs.powersync.com/configuration/auth/development-tokens) to get up and running quickly

            // Return credentials with PowerSync endpoint and JWT token
            return new PowerSyncCredentials(_powerSyncUrl, authToken);
            
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching credentials: {ex.Message}");
            throw;
        }
    }

    public async Task UploadData(IPowerSyncDatabase database)
    {
        // Get the next transaction to upload
        CrudTransaction? transaction;
        try
        {
            transaction = await database.GetNextCrudTransaction();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"UploadData Error: {ex.Message}");
            return;
        }

        // If there's no transaction, there's nothing to upload
        if (transaction == null)
        {
            return;
        }

        // Get client ID if not already retrieved
        _clientId ??= await database.GetClientId();

        try
        {
            // Convert PowerSync operations to your backend format
            var batch = new List<object>();
            foreach (var operation in transaction.Crud)
            {
                batch.Add(new
                {
                    op = operation.Op.ToString(),  // INSERT, UPDATE, DELETE
                    table = operation.Table,
                    id = operation.Id,
                    data = operation.OpData
                });
            }

            // Send the operations to your backend
            var payload = JsonSerializer.Serialize(new { batch });
            var content = new StringContent(payload, Encoding.UTF8, "application/json");

            HttpResponseMessage response = await _httpClient.PostAsync($"{_backendUrl}/api/data", content);
            response.EnsureSuccessStatusCode();

            // Mark the transaction as completed
            await transaction.Complete();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"UploadData Error: {ex.Message}");
            throw;
        }
    }
}
```

With your database instantiated and your connector ready, call `connect` to start syncing data with your backend:

```cs
await db.Connect(new MyConnector());
await db.WaitForFirstSync(); // Optional, to wait for a complete snapshot of data to be available
```

<LocalOnly />

## Using PowerSync: CRUD functions

Once the PowerSync instance is configured you can start using the SQLite DB functions.

The most commonly used CRUD functions to interact with your SQLite data are:

- `PowerSyncDatabase.Get` - get (SELECT) a single row from a table.
- `PowerSyncDatabase.GetAll` - get (SELECT) a set of rows from a table.
- `PowerSyncDatabase.Watch` - execute a read query every time source tables are modified.
- `PowerSyncDatabase.Execute` - execute a write (INSERT/UPDATE/DELETE) query.

### Fetching a Single Item

The `Get` method executes a read-only (SELECT) query and returns a single result. It throws an exception if no result is found. Use `GetOptional` to return a single optional result (returns `null` if no result is found).

```cs
// Define a result type with properties matching the columns
// public class ListResult { public string id; public string name; public string owner_id; }

var list = await db.Get<ListResult>("SELECT * FROM lists WHERE id = ?", [listId]);
```

### Querying Items (PowerSync.GetAll)

The `GetAll` method returns a set of rows from a table.

```cs
// Define a result type with properties matching the columns
// public class ListResult { public string id; public string name; public string owner_id; }

var lists = await db.GetAll<ListResult>("SELECT * FROM lists");
```

### Watching Queries (PowerSync.Watch)

The `Watch` method executes a read query whenever a change to a dependent table is made.

```cs
// Use db.Watch() to watch queries for changes (await is used to wait for initialization):
<DotNetWatch />
```

### Mutations (PowerSync.Execute)

The `Execute` method can be used for executing single SQLite write statements.

```cs
// And db.Execute for inserts, updates and deletes:
await db.Execute(
  "insert into lists (id, name, owner_id, created_at) values (uuid(), 'New User', ?, datetime())",
  [connector.UserId]
);
```

## Configure Logging

Enable logging to help you debug your app. By default, the SDK uses a no-op logger that doesn't output any logs. To enable logging, you can configure a custom logger using .NET's `ILogger` interface:

```cs
using Microsoft.Extensions.Logging;
using PowerSync.Common.Client;

// Create a logger factory
ILoggerFactory loggerFactory = LoggerFactory.Create(builder =>
{
    builder.AddConsole();             // Enable console logging
    builder.SetMinimumLevel(LogLevel.Information);  // Set minimum log level
});

var logger = loggerFactory.CreateLogger("PowerSyncLogger");

var db = new PowerSyncDatabase(new PowerSyncDatabaseOptions
{
    Database = new SQLOpenOptions { DbFilename = "powersync.db" },
    Schema = AppSchema.PowerSyncSchema,
    Logger = logger
});
```

## Additional Usage Examples

For more usage examples including accessing connection status, monitoring sync progress, and waiting for initial sync, see the [Usage Examples](/client-sdks/usage-examples) page.

## Troubleshooting

See [Troubleshooting](/debugging/troubleshooting) for pointers to debug common issues.

## Supported Platforms

See [Supported Platforms -> .NET SDK](/resources/supported-platforms#net-sdk).

## Upgrading the SDK

To upgrade to the latest version of the PowerSync package, run the below command in your project folder:

<Tabs>
  <Tab title="Common">
    ```bash
    dotnet add package PowerSync.Common --prerelease
    ```
  </Tab>

  <Tab title="MAUI">
    ```bash
    dotnet add package PowerSync.Common --prerelease
    dotnet add package PowerSync.Maui --prerelease
    ```
  </Tab>
</Tabs>

<Note>
  Add `--prerelease` while this package is in alpha. To install a specific version, use `--version` instead: `dotnet add package PowerSync.Common --version 0.0.6-alpha.1`
</Note>

