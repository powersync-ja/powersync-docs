---
title: "Railway + PowerSync"
description: "Deploy PowerSync Service with a custom backend on Railway, including Postgres source database, bucket storage, and diagnostics app."
---

Railway is an attractive alternative to managed solutions like Supabase, giving you more control without the complexity of full IaaS management.

## Deploying to Railway

### Step 1: Deploy on Railway

Find the PowerSync template on the Railway Marketplace, or click the button below to get started:

<Card
   title="Deploy on Railway"
   icon="train"
   href="todo"
   horizontal
/>

<Note>
This template automatically creates `lists` and `todos` tables in your Postgres database. The default sync rules are configured to sync these tables to your clients.
</Note>

<Info>
The `Execute Scripts` service creates the **powersync** publication for the lists and todos tables. We recommend limiting the publication to only the tables you want clients to download.
</Info>

<Accordion title="Want to add more tables?">
If you need to add additional tables beyond `lists` and `todos`:

1. Edit the **Execute Scripts** service to include your table creation statements and publications
2. Redeploy the Execute Scripts service
3. Update the sync rules in your YAML config (Step 2) to include the new tables
4. Re-encode the YAML to base64 and update the `POWERSYNC_CONFIG_B64` variable
</Accordion>

### Step 2: Configure PowerSync Service

<Warning>
You'll notice the PowerSync service deployment crashes initially. This is expected, the `POWERSYNC_CONFIG_B64` environment variable isn't set yet.
</Warning>

Let's fix this by generating the config, setting the variable, and restarting the service.

<Steps>
  <Step title="Copy the YAML config">
    Start with the configuration below and update the sync rules to match your schema:
```yaml
    replication:
      connections:
        - type: postgresql
          uri: ${POSTGRES_SOURCE_URL}
          sslmode: disable

    storage:
      type: postgresql
      uri: ${POSTGRES_BUCKET_URL}
      sslmode: disable

    port: 80

    sync_rules:
      content: |
        bucket_definitions:
          global:
            data:
              - SELECT * FROM lists
              - SELECT * FROM todos

    client_auth:
      jwks_uri: https://${BACKEND_URL}/api/auth/keys
      audience:
        - https://${POWERSYNC_URL}
```
  </Step>

  <Step title="Replace the placeholders">
  Replace each placeholder with the corresponding values from Railway:

   <AccordionGroup>
      <Accordion title="${POSTGRES_SOURCE_URL}">
         Click on **Postgres Source Data** → *Variables* → copy `DATABASE_URL`
      </Accordion>

      <Accordion title="${POSTGRES_BUCKET_URL}">
         Click on **Postgres (PowerSync Bucket Storage)** → *Variables* → copy `DATABASE_URL`
      </Accordion>

      <Accordion title="${BACKEND_URL}">
         Click on **Node Backend** → *Settings* → *Networking* → copy the URL
      </Accordion>

      <Accordion title="${POWERSYNC_URL}">
         Click on **PowerSync Service** → *Settings* → *Networking* → copy the URL
      </Accordion>
   </AccordionGroup>
   </Step>

  <Step title="Encode and deploy">
    Once you've replaced all placeholders:
    
    1. Use a base64 encoding tool like [this one](https://fusionauth.io/dev-tools/base64-encoder-decoder) to encode the YAML file
    2. Copy the encoded string to the `POWERSYNC_CONFIG_B64` environment variable in the **PowerSync Service**
    3. Redeploy when prompted
  </Step>
</Steps>

### Step 3: Connect Your Client

<Card
  title="Client-Side Setup"
  icon="plug"
  href="/installation/client-side-setup"
>
  Follow our guide to connect your app to your backend and PowerSync instance
</Card>