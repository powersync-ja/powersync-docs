<Steps>
  <Step title="Step 1: Generate a shared secret">
    Generate a temporary private/public key-pair (RS256) or shared key (HS256) for JWT signing and verification. 

    You can use an online JWS key generator like [this one](https://8gwifi.org/jwsgen.jsp).

    1. Click **Generate JWS Keys & Sign** (you don't need to edit the default payload)
    2. Copy the shared secret value
    <Warning>
      Using an online key generator for secrets in a production environment is not recommended. 
    </Warning>
  </Step>
  <Step title="Step 2: Update `config.yaml`">
    Add the `client_auth` parameter to your `config.yaml` and update the `jwks` > `keys` > `k` value with the shared secret value copied in the previous step:

    ```yaml config.yaml
    # Client (application end user) authentication settings
    client_auth:
      # static collection of public keys for JWT verification
      jwks:
        keys:
          - kty: oct
            alg: 'HS256'
            k: '[secret]'
    ```
  </Step>
  <Step title="Step 3: Generate a development token">
    1. If you have not done so already, clone the [`powersync-service` repo](https://github.com/powersync-ja/powersync-service/tree/main)
    2. Install the dependencies:
      - In the project root, run the following commands:
        ```bash
        pnpm install
        pnpm build
        ```
      - In the `test-client` directory, run the following commands:
        ```bash
        pnpm build
        ```
    3. Generate a new token by running the following command in the `test-client` directory with your updated `config.yaml` file:
      ```bash
      node dist/bin.js generate-token --config path/to/config.yaml --sub test-user
      ```
      
      Replace `test-user` with the user ID you want to authenticate:
      - If you're using **global Sync Rules**, you can use any value (e.g., `test-user`) since all data syncs to all users
      - If you're using **user-specific Sync Rules**, use a user ID that matches a user in your database (this will be used as `request.user_id()` in your Sync Rules)
  </Step> 
</Steps>

<Note>
  Development tokens expire after 12 hours.
</Note>
