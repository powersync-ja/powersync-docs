---
title: ".NET (alpha)"
description: "SDK reference for using PowerSync in .NET clients."
sidebarTitle: Overview
---

import DotNetInstallation from '/snippets/dotnet/installation.mdx';
import DotNetWatch from '/snippets/dotnet/basic-watch-query.mdx';
import GenerateSchemaAutomatically from '/snippets/generate-schema-automatically.mdx';
import LocalOnly from '/snippets/local-only-escape.mdx';

<CardGroup cols={3}>
  <Card title="PowerSync SDK on NuGet" icon="nuget" href="https://www.nuget.org/packages/PowerSync.Common/">
    This SDK is distributed via NuGet
  </Card>

  <Card title="Source Code" icon="github" href="https://github.com/powersync-ja/powersync-dotnet">
    Refer to the `powersync-dotnet` repo on GitHub
  </Card>

  <Card title="API Reference (Coming soon)" icon="book">
    A full API Reference for this SDK is not yet available. This is planned for a future release.
  </Card>

  <Card title="Example Projects" icon="code" href="/resources/demo-apps-example-projects">
    Gallery of example projects/demo apps built with .NET PowerSync
  </Card>

  <Card title="Changelog" icon="megaphone" href="https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/CHANGELOG.md">
    Changelog for the SDK
  </Card>
</CardGroup>

<LocalOnly />

<Warning>
  This SDK is currently in an [**alpha** release](/resources/feature-status). It is not suitable for production use as breaking changes may still occur.
</Warning>

## Supported Frameworks and Targets

The PowerSync .NET SDK supports:

* **.NET Versions**: 6, 8, and 9
* **.NET Framework**: Version 4.8 (requires additional configuration)
* **MAUI**: Cross-platform support for Android, iOS, and Windows
* **WPF**: Windows desktop applications

**Current Limitations**:
* Blazor (web) platforms are not yet supported.

For more details, please refer to the package [README](https://github.com/powersync-ja/powersync-dotnet/tree/main?tab=readme-ov-file).

## SDK Features

* Provides real-time streaming of database changes.
* Offers direct access to the SQLite database, enabling the use of SQL on both client and server sides.
* Provides watched queries that allow listening for live updates to data.
* Eliminates the need for client-side database migrations as these are managed automatically.

## Quickstart

<DotNetInstallation />

Next, make sure that you have:

* Signed up for a PowerSync Cloud account ([here](https://accounts.journeyapps.com/portal/powersync-signup?s=docs)) or [self-host PowerSync](/self-hosting/getting-started).
* [Configured your backend database](/installation/database-setup) and connected it to your PowerSync instance.

### 1. Define the schema

The first step is defining the schema for the local SQLite database.

This schema represents a "view" of the downloaded data. No migrations are required — the schema is applied directly when the local PowerSync database is constructed (as we'll show in the next step).

<GenerateSchemaAutomatically />

You can use [this example](https://github.com/powersync-ja/powersync-dotnet/blob/main/demos/CommandLine/AppSchema.cs) as a reference when defining your schema.

### 2. Instantiate the PowerSync Database

Next, you need to instantiate the PowerSync database — this is the core managed database.

Its primary functions are to record all changes in the local database, whether online or offline. In addition, it automatically uploads changes to your app backend when connected.

**Example**:

The initialization syntax differs slightly between the Common and MAUI SDKs: 

<Tabs>
    <Tab title="Common">
    ```cs
    using PowerSync.Common.Client;

    class Demo
    {
        static async Task Main()
        {
            var db = new PowerSyncDatabase(new PowerSyncDatabaseOptions
            {
                Database = new SQLOpenOptions { DbFilename = "tododemo.db" },
                Schema = AppSchema.PowerSyncSchema,
            });
            await db.Init();
        }
    }
    ```
    </Tab>
    <Tab title="MAUI">
    ```cs
    using PowerSync.Common.Client;
    using PowerSync.Common.MDSQLite;
    using PowerSync.Maui.SQLite;
    
    class Demo
    {
        static async Task Main() 
        {
            // Ensures the DB file is stored in a platform appropriate location
            var dbPath = Path.Combine(FileSystem.AppDataDirectory, "maui-example.db");
            var factory = new MAUISQLiteDBOpenFactory(new MDSQLiteOpenFactoryOptions()
            {
                DbFilename = dbPath
            });

            var Db = new PowerSyncDatabase(new PowerSyncDatabaseOptions()
            {
                Database = factory, // Supply a factory
                Schema = AppSchema.PowerSyncSchema,
            });

            await db.Init();
        }
    }
    ```
    </Tab>
</Tabs>

### 3. Integrate with your Backend

The PowerSync backend connector provides the connection between your application backend and the PowerSync client-side managed SQLite database.

It is used to:

1. Retrieve an auth token to connect to the PowerSync instance.
2. Apply local changes on your backend application server (and from there, to your backend database)

Accordingly, the connector must implement two methods:

1. [PowerSyncBackendConnector.FetchCredentials](https://github.com/powersync-ja/powersync-dotnet/blob/main/demos/CommandLine/NodeConnector.cs#L50) - This is called every couple of minutes and is used to obtain credentials for your app backend API. -> See [Authentication Setup](/installation/authentication-setup) for instructions on how the credentials should be generated.
2. [PowerSyncBackendConnector.UploadData](https://github.com/powersync-ja/powersync-dotnet/blob/main/demos/CommandLine/NodeConnector.cs#L72) - Use this to upload client-side changes to your app backend.
   -> See [Writing Client Changes](/installation/app-backend-setup/writing-client-changes) for considerations on the app backend implementation.

**Example**:

```cs
using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Text;
using System.Text.Json;
using System.Threading.Tasks;
using PowerSync.Common.Client;
using PowerSync.Common.Client.Connection;
using PowerSync.Common.DB.Crud;

public class MyConnector : IPowerSyncBackendConnector
{
    private readonly HttpClient _httpClient;
    
    // User credentials for the current session
    public string UserId { get; private set; }
    
    // Service endpoints
    private readonly string _backendUrl;
    private readonly string _powerSyncUrl;
    private string? _clientId;

    public MyConnector()
    {
        _httpClient = new HttpClient();
        
        // In a real app, this would come from your authentication system
        UserId = "user-123"; 
        
        // Configure your service endpoints
        _backendUrl = "https://your-backend-api.example.com";
        _powerSyncUrl = "https://your-powersync-instance.powersync.journeyapps.com";
    }

    public async Task<PowerSyncCredentials?> FetchCredentials()
    {
        try {
            // Obtain a JWT from your authentication service.
            // See https://docs.powersync.com/installation/authentication-setup
            // If you're using Supabase or Firebase, you can re-use the JWT from those clients, see
            // - https://docs.powersync.com/installation/authentication-setup/supabase-auth
            // - https://docs.powersync.com/installation/authentication-setup/firebase-auth

            var authToken = "your-auth-token"; // Use a development token (see Authentication Setup https://docs.powersync.com/installation/authentication-setup/development-tokens) to get up and running quickly

            // Return credentials with PowerSync endpoint and JWT token
            return new PowerSyncCredentials(_powerSyncUrl, authToken);
            
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error fetching credentials: {ex.Message}");
            throw;
        }
    }

    public async Task UploadData(IPowerSyncDatabase database)
    {
        // Get the next transaction to upload
        CrudTransaction? transaction;
        try
        {
            transaction = await database.GetNextCrudTransaction();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"UploadData Error: {ex.Message}");
            return;
        }

        // If there's no transaction, there's nothing to upload
        if (transaction == null)
        {
            return;
        }

        // Get client ID if not already retrieved
        _clientId ??= await database.GetClientId();

        try
        {
            // Convert PowerSync operations to your backend format
            var batch = new List<object>();
            foreach (var operation in transaction.Crud)
            {
                batch.Add(new
                {
                    op = operation.Op.ToString(),  // INSERT, UPDATE, DELETE
                    table = operation.Table,
                    id = operation.Id,
                    data = operation.OpData
                });
            }

            // Send the operations to your backend
            var payload = JsonSerializer.Serialize(new { batch });
            var content = new StringContent(payload, Encoding.UTF8, "application/json");

            HttpResponseMessage response = await _httpClient.PostAsync($"{_backendUrl}/api/data", content);
            response.EnsureSuccessStatusCode();

            // Mark the transaction as completed
            await transaction.Complete();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"UploadData Error: {ex.Message}");
            throw;
        }
    }
}
```

With your database instantiated and your connector ready, call `connect` to start the synchronization process:

```cs
await db.Connect(new MyConnector());
await db.WaitForFirstSync(); // Optional, to wait for a complete snapshot of data to be available
```

## Usage

After connecting the client database, it is ready to be used. You can run queries and make updates as follows:

```cs
// Use db.Get() to fetch a single row:
Console.WriteLine(await db.Get<object>("SELECT powersync_rs_version();"));

// Or db.GetAll() to fetch all:
// Where List result is defined:
// record ListResult(string id, string name, string owner_id, string created_at);
Console.WriteLine(await db.GetAll<ListResult>("SELECT * FROM lists;"));

// Use db.Watch() to watch queries for changes (await is used to wait for initialization):
<DotNetWatch />

// And db.Execute for inserts, updates and deletes:
await db.Execute(
  "insert into lists (id, name, owner_id, created_at) values (uuid(), 'New User', ?, datetime())",
  [connector.UserId]
);
```

## Access PowerSync connection status information

Use [SyncStatus](https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/DB/Crud/SyncStatus.cs) and access [CurrentStatus](https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/Client/PowerSyncDatabase.cs) to listen for status changes to your PowerSync instance.

```cs
using PowerSync.Common.Client;
using PowerSync.Common.DB.Crud;

class StatusIndicator
{
    private SyncStatus? _currentStatus;

    public StatusIndicator(PowerSyncDatabase db)
    {
        // Monitor status changes (you would typically use an event or observable pattern)
        // For example, poll periodically or use your framework's reactive patterns
        db.RunListener((update) =>
        {
            var newStatus= update.StatusChanged;
            if (newStatus != null && newStatus != _currentStatus)
            {
                _currentStatus = newStatus;
                UpdateStatusIcon(_currentStatus);
            }
        });
    }

    private void UpdateStatusIcon(SyncStatus status)
    {
        var dataFlow = status.DataFlowStatus;
        var hasError = dataFlow.DownloadError != null || dataFlow.UploadError != null;

        if (hasError)
        {
            var errorMessage = dataFlow.DownloadError?.Message ?? dataFlow.UploadError?.Message ?? "Unknown error";
            if (!status.Connected)
            {
                Console.WriteLine($"Error: {errorMessage} - Not connected");
            }
            else
            {
                Console.WriteLine($"Error: {errorMessage} - Sync problem");
            }
        }
        else if (status.Connecting)
        {
            Console.WriteLine("Connecting...");
        }
        else if (!status.Connected)
        {
            Console.WriteLine("Not connected");
        }
        else if (dataFlow.Uploading && dataFlow.Downloading)
        {
            Console.WriteLine("Uploading and downloading");
        }
        else if (dataFlow.Uploading)
        {
            Console.WriteLine("Uploading");
        }
        else if (dataFlow.Downloading)
        {
            Console.WriteLine("Downloading");
        }
        else
        {
            Console.WriteLine("Connected");
        }
    }
}
```

## Wait for the initial sync to complete

Use the [HasSynced](https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/DB/Crud/SyncStatus.cs) property (available since version 0.0.6-alpha.1 of the SDK) to indicate to the user whether the initial sync is in progress.

```cs
using PowerSync.Common.Client;

// Example of using HasSynced to show whether the first sync has completed
if (status?.HasSynced == true)
{
    Console.WriteLine("Initial sync completed!");
}
else
{
    Console.WriteLine("Busy with initial sync...");
}

// For async use cases, use WaitForFirstSync which returns a task that completes once the first full sync has completed
await db.WaitForFirstSync();

// Wait for a specific priority level to complete syncing
// The priority parameter is available since version 0.0.6-alpha.1 of the SDK
var prioritySyncRequest = new PowerSyncDatabase.PrioritySyncRequest{ Priority = 1 };
await db.WaitForFirstSync(request: prioritySyncRequest);
```

## Report sync download progress

You can show users a progress bar when data downloads using the `DownloadProgress()` method from the [SyncStatus](https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/DB/Crud/SyncStatus.cs) class. `DownloadProgress().DownloadedFraction` gives you a value from 0.0 to 1.0 representing the total sync progress. This is especially useful for long-running initial syncs.

<Note>
  **Version compatibility**: The `DownloadProgress()` method is available since version 0.0.6-alpha.1 of the SDK.
</Note>

Example:

```cs
using PowerSync.Common.Client;
using PowerSync.Common.DB.Crud;

class SyncProgressBar
{
    private PowerSyncDatabase _db;
    private int? _priority; // Optional: when set, show progress towards this priority instead of the full sync

    private SyncStatus? _currentStatus;

    public SyncProgressBar(PowerSyncDatabase db, int? priority = null)
    {
        _db = db;
        _priority = priority;

           db.RunListener((update) =>
        {
            var newStatus= update.StatusChanged;
            if (newStatus != null && newStatus != _currentStatus)
            {
                _currentStatus = newStatus;
                DisplayProgress();
            }
        });
    }

    public void DisplayProgress()
    {
        var status = _currentStatus;
        var totalProgress = status?.DownloadProgress();

        var progress = _priority == null 
            ? totalProgress 
            : totalProgress?.UntilPriority(_priority.Value);

        if (progress != null)
        {
            var fraction = progress.DownloadedFraction; // 0.0 to 1.0
            var downloadedOps = progress.DownloadedOperations;
            var totalOps = progress.TotalOperations;

            Console.WriteLine($"Sync progress: {fraction * 100:F1}%");

            if (downloadedOps == totalOps)
            {
                Console.WriteLine("Applying server-side changes...");
            }
            else
            {
                Console.WriteLine($"Downloaded {downloadedOps} out of {totalOps} operations");
            }
        }
    }
}
```

## Monitor sync status by priority

When using [bucket priorities](/usage/use-case-examples/prioritized-sync), you can access priority-specific sync status information using [PriorityStatusEntries](https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/DB/Crud/SyncStatus.cs) and [StatusForPriority](https://github.com/powersync-ja/powersync-dotnet/blob/main/PowerSync/PowerSync.Common/DB/Crud/SyncStatus.cs):

<Note>
  **Version compatibility**: `PriorityStatusEntries` and `StatusForPriority()` are available since version 0.0.6-alpha.1 of the SDK.
</Note>

```cs
using PowerSync.Common.Client;
using PowerSync.Common.DB.Crud;

var status = db.CurrentStatus;
var priorityEntries = status?.PriorityStatusEntries;

if (priorityEntries != null && priorityEntries.Length > 0)
{
    foreach (var entry in priorityEntries)
    {
        var syncedStatus = entry.HasSynced == true ? "Synced" : entry.HasSynced == false ? "Not synced" : "Unknown";
        Console.WriteLine($"Priority {entry.Priority}: {syncedStatus} (Last synced: {entry.LastSyncedAt?.ToString() ?? "Never"})");
    }
    
    // Get status for a specific priority
    var priority1Status = status?.StatusForPriority(1);
    if (priority1Status != null)
    {
        Console.WriteLine($"Priority 1 has synced: {priority1Status.HasSynced}");
    }
}
```

## Configure Logging

Enable logging to help you debug your app. By default, the SDK uses a no-op logger that doesn't output any logs. To enable logging, you can configure a custom logger using .NET's `ILogger` interface:

```cs
using Microsoft.Extensions.Logging;
using PowerSync.Common.Client;

// Create a logger factory
ILoggerFactory loggerFactory = LoggerFactory.Create(builder =>
{
    builder.AddConsole();             // Enable console logging
    builder.SetMinimumLevel(LogLevel.Information);  // Set minimum log level
});

var logger = loggerFactory.CreateLogger("PowerSyncLogger");

var db = new PowerSyncDatabase(new PowerSyncDatabaseOptions
{
    Database = new SQLOpenOptions { DbFilename = "powersync.db" },
    Schema = AppSchema.PowerSyncSchema,
    Logger = logger
});
```

## Supported Platforms

See [Supported Platforms -> .NET SDK](/resources/supported-platforms#net-sdk).
