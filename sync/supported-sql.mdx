---
title: "Supported SQL"
description: SQL syntax, operators, and functions supported in Sync Streams and Sync Rules queries.
---

This page documents the SQL syntax and functions supported in Sync Streams and Sync Rules (legacy).

## Query Syntax

The supported SQL is based on a subset of the SQL standard syntax. Sync Streams support more SQL features than Sync Rules.

<Tabs>
<Tab title="Sync Streams">
1. `SELECT` statements with column selection and `WHERE` filtering
2. Subqueries with `IN (SELECT ...)`, including nested subqueries
3. `JOIN` / `INNER JOIN` for traversing relationships (selected columns must come from a single table)
4. Common Table Expressions (CTEs) via the `with:` block
5. Table-valued functions like `json_each()` for expanding arrays
6. A limited set of operators and functions — see below

No aggregation, sorting, or set operations (`GROUP BY`, `ORDER BY`, `LIMIT`, `UNION`, etc.).

See [Writing Queries](/sync/streams/queries) for details and examples.
</Tab>
<Tab title="Sync Rules (Legacy)">
1. Simple `SELECT` statements
2. `WHERE` filtering with `=`, `IN`, and `IS NULL` on parameters
3. A limited set of operators and functions — see below

No subqueries, JOINs, CTEs, aggregation, or sorting.

See [Sync Rules documentation](/sync/rules/overview) for details.
</Tab>
</Tabs>


## Operators and Functions

Operators and functions can be used to transform columns/fields before being synced to a client. These work the same in both Sync Streams and Sync Rules.

When filtering on parameters, operators can only be used in a limited way. Typically only `=`, `IN` and `IS NULL` are allowed on the parameters, and special limits apply when combining clauses with `AND`, `OR` or `NOT`.

When transforming output columns/fields, or filtering on row/document values, those restrictions do not apply.

If a specific operator or function is needed, please [contact us](/resources/contact-us) so that we can consider inclusion in our roadmap.

Some fundamental restrictions on these operators and functions are:

1. It must be deterministic — no random or time-based functions.
2. No external state can be used.
3. It must operate on data available within a single row/document. For example, no aggregation functions allowed.


### Operators

| Operator                                                                                                | Notes                                                                                                    |
| ------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- |
| Comparison:<br/> `= != < > <= >=`                                                                         | If either parameter is null, this evaluates to null.                                                     |
| Null:<br/> `IS NULL`, `IS NOT NULL`                                                                      |                                                                                                          |
| Mathematical:<br/> `+ - * /`                                                                             |                                                                                                          |
| Logical:<br/> `AND`, `OR`, `NOT`                                                                         |                                                                                                          |
| Cast:<br/> `CAST(x AS type)`<br/>`x :: type`                                                            | Cast to text, numeric, integer, real or blob.                                                             |
| JSON:<br/> `json -> 'path'`<br/>`json ->> 'path'`                                                      | `->` Returns the value as a JSON string.<br/> `->>` Returns the extracted value.                          |
| Text concatenation:<br/> `\|\|`                                                                            | Joins two text values together.                                                                          |
| Arrays:<br/> `<left> IN <right>`                                                                        | Returns true if the `left` value is present in the `right` JSON array.<br/>In data queries, only the `left` value may be a bucket parameter. In parameter queries, the `left` or `right` value may be a bucket parameter.<br/>Differs from the SQLite operator in that it can be used directly on a JSON array. |

### Functions

| Function                                                                         | Description                                                                                                                                                                                                                                                                                                                                                                                      |
| -------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [upper(text)](https://www.sqlite.org/lang_corefunc.html#upper)                 | Convert text to upper case.                                                                                                                                                                                                                                                                                                                                                                      |
| [lower(text)](https://www.sqlite.org/lang_corefunc.html#lower)                 | Convert text to lower case.                                                                                                                                                                                                                                                                                                                                                                      |
| [substring(text, start, length)](https://sqlite.org/lang_corefunc.html#substr)   | Extracts a portion of a string based on specified start index and length. Start index is 1-based. Example: `substring(created_at, 1, 10)` returns the date portion of the timestamp. |
| [hex(data)](https://www.sqlite.org/lang_corefunc.html#hex)                     | Convert blob or text data to hexadecimal text.                                                                                                                                                                                                                                                                                                                                                   |
| base64(data)                                                                     | Convert blob or text data to base64 text.                                                                                                                                                                                                                                                                                                                                                        |
| [length(data)](https://www.sqlite.org/lang_corefunc.html#length)               | For text, return the number of characters. For blob, return the number of bytes. For null, return null. For integer and real, convert to text and return the number of characters.                                                                                                                                                                                                               |
| [typeof(data)](https://www.sqlite.org/lang_corefunc.html#typeof)               | text, integer, real, blob or null                                                                                                                                                                                                                                                                                                                                                                |
| [json\_each(data)](https://www.sqlite.org/json1.html#jeach)         | Expands a JSON array into rows. **Sync Streams**: Can be used as a table-valued function with JOIN syntax (e.g., `JOIN json_each(auth.parameter('ids')) AS t`). **Sync Rules**: Used in parameter queries to expand arrays. Only works with auth/connection parameters, not on columns from joined tables. |
| [json\_extract(data, path)](https://www.sqlite.org/json1.html#jex)               | Same as `->>` operator, but the path must start with `$.`                                                                                                                                                                                                                                                                                                                                         |
| [json\_array\_length(data)](https://www.sqlite.org/json1.html#jarraylen)         | Given a JSON array (as text), returns the length of the array. If data is null, returns null. If the value is not a JSON array, returns 0.                                                                                                                                                                                                                                                        |
| [json\_valid(data)](https://www.sqlite.org/json1.html#jvalid)                    | Returns 1 if the data can be parsed as JSON, 0 otherwise.                                                                                                                                                                                                                                                                                                                                        |
| json\_keys(data)                    | Returns the set of keys of a JSON object as a JSON array. Example: `select * from items where bucket.user_id in json_keys(permissions_json)`                                                                                                                                                                                                                                                                                                                                       |
| [ifnull(x,y)](https://www.sqlite.org/lang_corefunc.html#ifnull)                | Returns x if non-null, otherwise returns y.                                                                                                                                                                                                                                                                                                                                                      |
| [iif(x,y,z)](https://www.sqlite.org/lang_corefunc.html#iif)                | Returns y if x is true, otherwise returns z.                                                                                                                                                                                                                                                                                                                                                      |
| [uuid_blob(id)](https://sqlite.org/src/file/ext/misc/uuid.c)                             | Convert a UUID string to bytes.                                                                                                                                                                                                                                                                                                                    |
| [unixepoch(datetime, \[modifier\])](https://www.sqlite.org/lang_datefunc.html) | Returns a datetime as Unix timestamp. If modifier is "subsec", the result is a floating point number, with milliseconds including in the fraction. The datetime argument is required - this function cannot be used to get the current time.                                                                                                                                                     |
| [datetime(datetime, \[modifier\])](https://www.sqlite.org/lang_datefunc.html)  | Returns a datetime as a datetime string, in the format YYYY-MM-DD HH:MM:SS. If the specifier is "subsec", milliseconds are also included. If the modifier is "unixepoch", the argument is interpreted as a unix timestamp. Both modifiers can be included: datetime(timestamp, 'unixepoch', 'subsec'). The datetime argument is required - this function cannot be used to get the current time. |
| [ST\_AsGeoJSON(geometry)](https://postgis.net/docs/ST_AsGeoJSON.html)          | Convert [PostGIS](https://postgis.net/) (in Postgres) geometry from WKB to GeoJSON. Combine with JSON operators to extract specific fields.                                                                                                                                                                                                                                                      |
| [ST\_AsText(geometry)](https://postgis.net/docs/ST_AsText.html)                | Convert [PostGIS](https://postgis.net/) (in Postgres) geometry from WKB to Well-Known Text (WKT).                                                                                                                                                                                                                                                                                                |
| [ST\_X(point)](https://postgis.net/docs/ST_X.html)                             | Get the X coordinate of a [PostGIS](https://postgis.net/) point (in Postgres)                                                                                                                                                                                                                                                                                                                    |
| [ST\_Y(point)](https://postgis.net/docs/ST_Y.html)                             | Get the Y coordinate of a [PostGIS](https://postgis.net/) point (in Postgres)                                                                                                                                                                                                                                                                                                                    |

Most of these functions are based on the [built-in SQLite functions](https://www.sqlite.org/lang_corefunc.html) and [SQLite JSON functions](https://www.sqlite.org/json1.html).
