<Steps>
  <Step title="Step 1: Generate signing keys">
    Generate a temporary private/public key-pair (RS256) or shared key (HS256) for JWT signing and verification.

    <Tabs>
      <Tab title="RS256">
        Use an online JWK generator like [mkjwk.org](https://mkjwk.org/) (select RSA, 2048 bits, Signature use, RS256 algorithm).
        
        Or generate locally with Node.js:

        ```bash
        # Install pem-jwk if needed
        npm install -g pem-jwk
        
        # Generate private key
        openssl genrsa -out private-key.pem 2048
        
        # Convert public key to JWK format
        openssl rsa -in private-key.pem -pubout | pem-jwk
        ```
      </Tab>

      <Tab title="HS256">
        Use an online JWK generator like [mkjwk.org](https://mkjwk.org/) (select oct, 256 bits, Signature use, HS256 algorithm) - this outputs base64url directly.
        
        Or generate and convert using OpenSSL:

        ```bash
        # Generate and convert to base64url
        openssl rand -base64 32 | tr '+/' '-_' | tr -d '='
        ```
        
        <Warning>
          For production environments, shared secrets (HS256) are not recommended.
        </Warning>
      </Tab>
    </Tabs>
  </Step>
  <Step title="Step 2: Update `config.yaml`">
    Add the `client_auth` section to your `config.yaml`:

    <Tabs>
      <Tab title="RS256">
        Copy the JWK values from [mkjwk.org](https://mkjwk.org/) or the `pem-jwk` output, then add to your config:
        
        ```yaml config.yaml
        # Client (application end user) authentication settings
        client_auth:
          # static collection of public keys for JWT verification
          jwks:
            keys:
              - kty: 'RSA'
                n: '[rsa-modulus]'
                e: '[rsa-exponent]'
                alg: 'RS256'
                kid: 'dev-key-1'
        ```
      </Tab>

      <Tab title="HS256">
        Copy the `k` value from mkjwk.org or the OpenSSL output, then add to your config:
        
        ```yaml config.yaml
        # Client (application end user) authentication settings
        client_auth:
          audience: ['http://localhost:8080', 'http://127.0.0.1:8080']
          # static collection of public keys for JWT verification
          jwks:
            keys:
              - kty: oct
                alg: 'HS256'
                k: '[base64url-encoded-shared-secret]'
                kid: 'dev-key-1'
        ```
      </Tab>
    </Tabs>
    
    <Note>
      These examples use static `jwks: keys:` for simplicity. For production, we recommend using `jwks_uri` to point to a JWKS endpoint instead. See [Custom Authentication](/configuration/auth/custom) for more details.
    </Note>
  </Step>
  <Step title="Step 3: Generate a development token">
    1. If you have not done so already, clone the [`powersync-service` repo](https://github.com/powersync-ja/powersync-service/tree/main)
    2. Install the dependencies:
      - In the project root, run the following commands:
        ```bash
        pnpm install
        pnpm build
        ```
      - In the `test-client` directory, run the following commands:
        ```bash
        pnpm build
        ```
    3. Generate a new token by running the following command in the `test-client` directory with your updated `config.yaml` file:
      ```bash
      node dist/bin.js generate-token --config path/to/config.yaml --sub test-user
      ```
      
      Replace `test-user` with the user ID you want to authenticate:
      - If you're only syncing data without parameters (data shared between all users), you can use any value (e.g., `test-user`) since all data syncs to all users
      - If you're using Sync Streams or Sync Rules (legacy) that filter data by user, use a user ID that matches a user in your database (this will be used as `auth.user_id()` in Sync Streams or `request.user_id()` in Sync Rules)
  </Step> 
</Steps>

<Note>
  Development tokens expire after 12 hours.
</Note>
