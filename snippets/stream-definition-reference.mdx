```yaml
config:
  edition: 2

with:
  # Global CTEs (optional) - reusable subqueries available to all streams
  <cte_name>: SELECT ... FROM ...

streams:
  <stream_name>:
    # Query options (use one)
    query: SELECT * FROM <table> WHERE ...         # Single query
    queries:                                        # Multiple queries (same bucket)
      - SELECT * FROM <table_a> WHERE ...
      - SELECT * FROM <table_b> WHERE ...
    
    # Stream-scoped CTEs (optional)
    with:
      <local_cte>: SELECT ... FROM ...
    
    # Behavior options
    auto_subscribe: true    # Auto-subscribe clients on connect (default: false)
    priority: 1             # Sync priority, lower = higher priority (optional)
    accept_potentially_dangerous_queries: true  # Silence security warnings (default: false)
```

| Option | Default | Description |
|--------|---------|-------------|
| `query` | — | SQL-like query defining which data to sync. Use either `query` or `queries`, not both. |
| `queries` | — | Array of queries sharing the same bucket. See [Multiple Queries](/sync/streams/queries#multiple-queries-per-stream). |
| `with` | — | Stream-scoped [CTEs](/sync/streams/ctes) available only to this stream's queries. |
| `auto_subscribe` | `false` | When `true`, clients automatically subscribe on connect. |
| `priority` | — | Sync priority (lower value = higher priority). See [Prioritized Sync](/sync/advanced/prioritized-sync). |
| `accept_potentially_dangerous_queries` | `false` | Silences security warnings when queries use client-controlled parameters without JWT-based authorization. Set to `true` only if you've verified the query is safe. |
